sources:
  kongLatestVersion:
    name: Get latest release
    kind: githubrelease
    spec:
      owner: gh-org-template
      repository: kong-development
      token: '{{ requiredEnv "UPDATECLI_GITHUB_TOKEN" }}'
      username: '{{ requiredEnv "UPDATECLI_GITHUB_ACTOR" }}'
  fpmLatestVersion:
    name: Get latest release
    kind: githubrelease
    spec:
      owner: gh-org-template
      repository: multi-arch-fpm
      token: '{{ requiredEnv "UPDATECLI_GITHUB_TOKEN" }}'
      username: '{{ requiredEnv "UPDATECLI_GITHUB_ACTOR" }}'
targets:
  updateKongDockerVersion:
    name: "Update base image"
    sourceid: kongLatestVersion
    kind: dockerfile
    spec:
      files:
        - Dockerfile
      instruction:
        keyword: "ARG"
        matcher: "KONG_DEVELOPMENT_VERSION"
  updateFpmDockerVersion:
    name: "Update base image"
    sourceid: fpmLatestVersion
    kind: dockerfile
    spec:
      files:
        - Dockerfile
      instruction:
        keyword: "ARG"
        matcher: "FPM_VERSION"
